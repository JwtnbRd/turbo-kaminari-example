# å®Œäº†ä½œæ¥­åˆ†æ

## ä½œæ¥­æœŸé–“

é–‹å§‹: å‰å›ã‚»ãƒƒã‚·ãƒ§ãƒ³
å®Œäº†: ç¾åœ¨ã‚»ãƒƒã‚·ãƒ§ãƒ³

## å®Ÿæ–½ã—ãŸãƒ•ã‚§ãƒ¼ã‚º

### 1. Tsumikiãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å°å…¥

#### èª²é¡Œ
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«Tsumikiã‚³ãƒãƒ³ãƒ‰ãŒå­˜åœ¨ã—ãªã„
- ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç§»æ¤ã—ãŸã„

#### å®Ÿæ–½å†…å®¹
- `.claude/commands/` é…ä¸‹ã«4ã¤ã®ã‚³ãƒãƒ³ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ:
  - `tsumiki-kairo-requirements.md` - è¦ä»¶å®šç¾©ã‚³ãƒãƒ³ãƒ‰
  - `tsumiki-kairo-design.md` - è¨­è¨ˆã‚³ãƒãƒ³ãƒ‰
  - `tsumiki-kairo-tasks.md` - ã‚¿ã‚¹ã‚¯åˆ†å‰²ã‚³ãƒãƒ³ãƒ‰
  - `tsumiki-kairo-implement.md` - å®Ÿè£…ã‚³ãƒãƒ³ãƒ‰

#### é­é‡ã—ãŸå•é¡Œã¨è§£æ±º
**å•é¡Œ**: æœ€åˆ `kairo-*.md` ã§ä½œæˆã—ãŸãŒã‚³ãƒãƒ³ãƒ‰ãŒèªè­˜ã•ã‚Œãªã„
**åŸå› **: æ—¢å­˜ã‚³ãƒãƒ³ãƒ‰ã¯ `tsumiki-kairo-*.md` ã¨ã„ã†å‘½åè¦å‰‡
**è§£æ±º**: ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ `tsumiki-` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ä»˜ãã«å¤‰æ›´

### 2. è¦ä»¶å®šç¾©ãƒ•ã‚§ãƒ¼ã‚º (`/tsumiki-kairo-requirements`)

#### å…¥åŠ›æƒ…å ±
- `.claude/MVP_GUIDE.md` - MVPé–‹ç™ºã‚¬ã‚¤ãƒ‰
- `.claude/SUMMARY.md` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- `docs/requirements.md` - æ—¢å­˜è¦ä»¶ï¼ˆæœªæ•´ç†ï¼‰

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æœ›
- **é–‹ç™ºæœŸé–“**: 1é€±é–“
- **é‡è¦æ©Ÿèƒ½**: é€£ç¶šæ—¥æ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚° + é€±æ¬¡ãƒ»æœˆæ¬¡ãƒ©ãƒ³ã‚­ãƒ³ã‚°
- **æ±‚ã‚ã‚‹ã‚‚ã®**: VIPæ±ºå®šã€é”æˆåŸºæº–ã€ã‚¿ã‚¹ã‚¯åˆ†å‰²

#### æˆæœç‰©
`docs/spec/requirements.md` - EARSè¨˜æ³•ã«ã‚ˆã‚‹è¦ä»¶å®šç¾©æ›¸

**å®šç¾©ã—ãŸè¦ä»¶**: 13ä»¶
- REQ-001/002: èªè¨¼ï¼ˆç™»éŒ²ãƒ»ãƒ­ã‚°ã‚¤ãƒ³ï¼‰
- REQ-003/004: ç®¡ç†æ©Ÿèƒ½ï¼ˆãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°CRUDï¼‰
- REQ-005/006/007: ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œãƒ»è¨˜éŒ²
- REQ-008: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµ±è¨ˆ
- REQ-009: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º
- REQ-010/011/012/013: 4ç¨®é¡ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°

#### æŠ€è¡“çš„æ±ºå®š
- **MVPç¯„å›²**: åŸºæœ¬æ©Ÿèƒ½ + 4ç¨®ãƒ©ãƒ³ã‚­ãƒ³ã‚°
- **é™¤å¤–æ©Ÿèƒ½**: ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆã€E2Eãƒ†ã‚¹ãƒˆã€ãƒ‡ãƒ—ãƒ­ã‚¤

### 3. è¨­è¨ˆãƒ•ã‚§ãƒ¼ã‚º (`/tsumiki-kairo-design`)

#### æˆæœç‰©ï¼ˆ4ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰

##### 3.1 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ (`docs/design/architecture.md`)
**é¸æŠ**: ãƒ¢ãƒãƒªã‚·ãƒƒã‚¯3å±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
**ç†ç”±**: 1é€±é–“é–‹ç™ºã€ã‚·ãƒ³ãƒ—ãƒ«ã€ç¤¾å†…ã‚¢ãƒ—ãƒªã§ååˆ†

**æ§‹æˆ**:
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: React SPA (Vite + TypeScript)
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: Rails API mode
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: PostgreSQL

**èªè¨¼æ–¹å¼**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ï¼ˆDeviseï¼‰
- JWTã‚ˆã‚Šå®Ÿè£…ãŒé€Ÿã„
- Cookieãƒ™ãƒ¼ã‚¹ã§ç®¡ç†ãŒç°¡å˜
- ç¤¾å†…ã‚¢ãƒ—ãƒªã§ååˆ†ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

##### 3.2 ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆ (`docs/design/data.md`)
**ãƒ†ãƒ¼ãƒ–ãƒ«**: 4ã¤
1. `users` - Deviseæ¨™æº– + username, role
2. `trainings` - ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒã‚¹ã‚¿
3. `training_records` - å®Ÿè¡Œè¨˜éŒ²
4. `user_stats` - çµ±è¨ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ†ãƒ¼ãƒ–ãƒ«

**é‡è¦ãªè¨­è¨ˆåˆ¤æ–­**:
- `user_stats` ã§çµ±è¨ˆã‚’éæ­£è¦åŒ–ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å„ªå…ˆï¼‰
- é€£ç¶šæ—¥æ•°ã¯ `current_streak` ã¨ `longest_streak` ã‚’åˆ†é›¢
- `last_training_date` ã§streakè¨ˆç®—ã‚’æœ€é©åŒ–

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥**:
```sql
-- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚¯ã‚¨ãƒªæœ€é©åŒ–
CREATE INDEX idx_user_stats_total_points ON user_stats(total_points DESC);
CREATE INDEX idx_user_stats_current_streak ON user_stats(current_streak DESC);

-- æœŸé–“çµã‚Šè¾¼ã¿æœ€é©åŒ–
CREATE INDEX idx_training_records_user_completed ON training_records(user_id, completed_at);
```

##### 3.3 APIè¨­è¨ˆ (`docs/design/api.md`)
**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: 14å€‹

**èªè¨¼API** (4):
- POST /api/v1/auth/sign_in
- POST /api/v1/auth
- DELETE /api/v1/auth/sign_out
- GET /api/v1/current_user

**ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°API** (3):
- GET /api/v1/trainings
- GET /api/v1/admin/trainings
- POST /api/v1/admin/trainings

**è¨˜éŒ²API** (2):
- POST /api/v1/training_records
- GET /api/v1/training_records

**çµ±è¨ˆãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°API** (4):
- GET /api/v1/user_stat
- GET /api/v1/point_rankings?period=all|week|month
- GET /api/v1/streak_rankings
- GET /api/v1/calendar_days?year=YYYY&month=MM

**è¨­è¨ˆåŸå‰‡**:
- RESTfulè¨­è¨ˆï¼ˆDHHæµï¼‰
- collection/memberã‚’ä½¿ã‚ãªã„
- ãƒã‚¹ãƒˆã¯1éšå±¤ã¾ã§

##### 3.4 UIè¨­è¨ˆ (`docs/design/ui.md`)
**ç”»é¢**: 6ã¤
1. ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ç™»éŒ²ç”»é¢
2. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
3. ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œç”»é¢
4. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢
5. ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç”»é¢ï¼ˆ4ã‚¿ãƒ–ï¼‰
6. ç®¡ç†ç”»é¢

**ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ **:
- TailwindCSS
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œï¼ˆsm: 640px, md: 768px, lg: 1024pxï¼‰
- ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆå®šç¾©æ¸ˆã¿

**é‡è¦ãªUIæ±ºå®š**:
- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç”»é¢ã¯4ã‚¿ãƒ–ï¼ˆç´¯è¨ˆãƒ»é€£ç¶šãƒ»é€±æ¬¡ãƒ»æœˆæ¬¡ï¼‰
- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¯æœˆæ¬¡ãƒ“ãƒ¥ãƒ¼ã®ã¿ï¼ˆæ—¥æ¬¡ãƒ»é€±æ¬¡ã¯é™¤å¤–ï¼‰
- ç®¡ç†ç”»é¢ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªä¸€è¦§ + ãƒ¢ãƒ¼ãƒ€ãƒ«ä½œæˆ

### 4. ã‚¿ã‚¹ã‚¯åˆ†å‰²ãƒ•ã‚§ãƒ¼ã‚º (`/tsumiki-kairo-tasks`)

#### æˆæœç‰©
`docs/tasks/1week-mvp-tasks.md` - 25ã‚¿ã‚¹ã‚¯ã®å®Ÿè£…è¨ˆç”»

#### ã‚¿ã‚¹ã‚¯åˆ†å‰²æˆ¦ç•¥

**å‚ç›´ã‚¹ãƒ©ã‚¤ã‚¹åŸå‰‡**:
- æŠ€è¡“ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã¯ãªãæ©Ÿèƒ½å˜ä½ã§åˆ†å‰²
- å„ã‚¿ã‚¹ã‚¯ã¯ç‹¬ç«‹ã—ã¦æ¤œè¨¼å¯èƒ½

**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**:
- **TDD** (10ã‚¿ã‚¹ã‚¯): ãƒ¢ãƒ‡ãƒ«ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©APIãªã©ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
- **DIRECT** (15ã‚¿ã‚¹ã‚¯): UIã€è¨­å®šã€åˆæœŸåŒ–ãªã©

**æ—¥æ¬¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«**:
| Day | ã‚¿ã‚¹ã‚¯æ•° | æ¨å®šæ™‚é–“ | ä¸»è¦ä½œæ¥­ |
|-----|----------|----------|----------|
| 1-2 | 6 | 14h | ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰ |
| 3 | 3 | 10h | ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ç®¡ç† |
| 4 | 4 | 13h | ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œ |
| 5 | 2 | 5h | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ |
| 6 | 3 | 9h | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°åŸºç›¤ |
| 7 | 4 | 12h | ãƒ©ãƒ³ã‚­ãƒ³ã‚°UIãƒ»æœ€çµ‚èª¿æ•´ |
| **åˆè¨ˆ** | **25** | **56h** | |

**ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹åˆ†æ**:
```
TASK-001 â†’ TASK-002 â†’ TASK-101 â†’ TASK-102 â†’ TASK-201 â†’ TASK-302 â†’ TASK-401 â†’ TASK-601
(2h)        (3h)        (2h)        (2h)        (1h)        (3h)        (4h)        (4h)
```
åˆè¨ˆ: 27æ™‚é–“ï¼ˆä½™è£•ãƒãƒƒãƒ•ã‚¡: 29æ™‚é–“ï¼‰

#### é‡è¦ã‚¿ã‚¹ã‚¯ã®è©³ç´°

**TASK-401: UserStatãƒ¢ãƒ‡ãƒ«å®Ÿè£…** (TDD, 4h)
- é€£ç¶šæ—¥æ•°è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…
- `recalculate!` ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆçµ±è¨ˆå†è¨ˆç®—ï¼‰
- `calculate_streaks` ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆstreakè¨ˆç®—ï¼‰

```ruby
def calculate_current_streak(last_date, new_date)
  return 1 if last_date.nil?
  days_diff = (new_date - last_date).to_i

  case days_diff
  when 0 then current_streak
  when 1 then current_streak + 1
  else 1
  end
end
```

**TASK-601: ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©API** (TDD, 4h)
- 4ç¨®é¡ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°å¯¾å¿œ
- æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆweek, month, allï¼‰
- é€±æ¬¡ã¯æœˆæ›œèµ·ç®—ã€æœˆæ¬¡ã¯æœˆåˆèµ·ç®—

## æŠ€è¡“çš„èª²é¡Œã¨è§£æ±ºç­–

### èª²é¡Œ1: é€£ç¶šæ—¥æ•°ã®è¨ˆç®—
**å•é¡Œ**: æ—¥ä»˜ã®é€£ç¶šæ€§ã‚’ã©ã†åˆ¤å®šã™ã‚‹ã‹
**è§£æ±º**:
- `last_training_date` ã‚’ä¿æŒ
- æ–°è¦è¨˜éŒ²æ™‚ã«æ—¥ä»˜å·®åˆ†ã‚’ãƒã‚§ãƒƒã‚¯
- 1æ—¥å·®ãªã‚‰ç¶™ç¶šã€ãã‚Œä»¥å¤–ã¯ãƒªã‚»ãƒƒãƒˆ

### èª²é¡Œ2: ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
**å•é¡Œ**: æ¯å›é›†è¨ˆã™ã‚‹ã¨é…ã„
**è§£æ±º**:
- `user_stats` ãƒ†ãƒ¼ãƒ–ãƒ«ã§äº‹å‰é›†è¨ˆ
- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¨˜éŒ²æ™‚ã«çµ±è¨ˆæ›´æ–°
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§ã‚½ãƒ¼ãƒˆé«˜é€ŸåŒ–

### èª²é¡Œ3: é€±æ¬¡ãƒ»æœˆæ¬¡ã®æœŸé–“åˆ¤å®š
**å•é¡Œ**: ã€Œä»Šé€±ã€ã€Œä»Šæœˆã€ã®å®šç¾©
**è§£æ±º**:
- é€±æ¬¡: æœˆæ›œæ—¥ã‚’é€±ã®é–‹å§‹æ—¥
- æœˆæ¬¡: æœˆåˆï¼ˆ1æ—¥ï¼‰ã‚’é–‹å§‹æ—¥
- SQLã§ `WHERE completed_at >= ?` ã§çµã‚Šè¾¼ã¿

## ä½œæˆã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§

### ã‚³ãƒãƒ³ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«
- `.claude/commands/tsumiki-kairo-requirements.md`
- `.claude/commands/tsumiki-kairo-design.md`
- `.claude/commands/tsumiki-kairo-tasks.md`
- `.claude/commands/tsumiki-kairo-implement.md`

### è¦ä»¶å®šç¾©
- `docs/spec/requirements.md`

### è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `docs/design/architecture.md`
- `docs/design/data.md`
- `docs/design/api.md`
- `docs/design/ui.md`

### ã‚¿ã‚¹ã‚¯è¨ˆç”»
- `docs/tasks/1week-mvp-tasks.md`

### ä½œæ¥­è¨˜éŒ²ï¼ˆæœ¬ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
- `.bank/dev/01_mvp_planning/0100_plan/plan.md`
- `.bank/dev/01_mvp_planning/0200_todo/todo_overview.md`
- `.bank/dev/01_mvp_planning/0300_analyze/completed_work.md`

## æ¬¡ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¸ã®å¼•ãç¶™ãäº‹é …

### ç¾åœ¨ã®çŠ¶æ…‹
- âœ… Tsumikiã‚³ãƒãƒ³ãƒ‰å°å…¥å®Œäº†
- âœ… è¦ä»¶å®šç¾©å®Œäº†ï¼ˆ13è¦ä»¶ï¼‰
- âœ… è¨­è¨ˆå®Œäº†ï¼ˆ4ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰
- âœ… ã‚¿ã‚¹ã‚¯åˆ†å‰²å®Œäº†ï¼ˆ25ã‚¿ã‚¹ã‚¯ï¼‰
- â¸ï¸ å®Ÿè£…æœªç€æ‰‹

### æ¬¡ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
```bash
/tsumiki-kairo-implement
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚ºã‚’é–‹å§‹ã—ã¾ã™ã€‚

### å®Ÿè£…é–‹å§‹æ™‚ã®æ³¨æ„ç‚¹

1. **é–‹ç™ºç’°å¢ƒç¢ºèª**
   - Dockerã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹
   - `.env.development` ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹

2. **ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹å„ªå…ˆ**
   - TASK-001ã‹ã‚‰é †ç•ªã«å®Ÿè£…
   - ä¾å­˜é–¢ä¿‚ã‚’å¿…ãšç¢ºèª

3. **TDDã‚µã‚¤ã‚¯ãƒ«éµå®ˆ**
   - Red: ãƒ†ã‚¹ãƒˆä½œæˆï¼ˆå¤±æ•—ç¢ºèªï¼‰
   - Green: æœ€å°å®Ÿè£…ï¼ˆãƒ†ã‚¹ãƒˆæˆåŠŸï¼‰
   - Refactor: ã‚³ãƒ¼ãƒ‰æ”¹å–„

4. **å„ã‚¿ã‚¹ã‚¯å®Œäº†åŸºæº–**
   - ãƒ†ã‚¹ãƒˆãŒå…¨ã¦ãƒ‘ã‚¹
   - å®Œäº†åŸºæº–ï¼ˆCompletion Criteriaï¼‰ã‚’æº€ãŸã™
   - æ¬¡ã‚¿ã‚¹ã‚¯ã®å‰ææ¡ä»¶ã‚’æº€ãŸã™

### å‚ç…§ã™ã¹ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

**è¨­è¨ˆç¢ºèªæ™‚**:
- `docs/design/architecture.md` - ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆ
- `docs/design/data.md` - ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©
- `docs/design/api.md` - ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä»•æ§˜

**å®Ÿè£…æ™‚**:
- `docs/tasks/1week-mvp-tasks.md` - ã‚¿ã‚¹ã‚¯è©³ç´°
- `.claude/CLAUDE.md` - ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
- `docs/spec/requirements.md` - å—ã‘å…¥ã‚ŒåŸºæº–

## å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†ä½œæ¥­

### 5. TASK-001: é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— (å®Œäº†)

#### å®Ÿæ–½å†…å®¹
- DevContainerç’°å¢ƒæ§‹ç¯‰å®Œäº†
- Docker-in-Dockeræ§‹æˆç¢ºèª
- PostgreSQL 15èµ·å‹•ç¢ºèªï¼ˆport 5432ï¼‰
- Redis 7èµ·å‹•ç¢ºèªï¼ˆport 6379ï¼‰

#### æˆæœç‰©
- `.devcontainer/devcontainer.json`
- `docker-compose.yml`

### 6. TASK-002: Rails APIåˆæœŸåŒ– + åŸºæœ¬è¨­å®š (å®Œäº†)

#### å®Ÿæ–½å†…å®¹
- Rails 8.0 API modeåˆæœŸåŒ–
- Gemfileè¨­å®šï¼ˆdevise, holidays, rubocop-rails-omakaseï¼‰
- CORSè¨­å®šï¼ˆcredentials: trueï¼‰
- RuboCopè¨­å®šï¼ˆ21ãƒ•ã‚¡ã‚¤ãƒ«é•åãªã—ï¼‰

#### æˆæœç‰©
- `backend/Gemfile`
- `backend/config/initializers/cors.rb`
- `backend/.rubocop.yml`

### 7. TASK-003: React + ViteåˆæœŸåŒ– (å®Œäº†)

#### å®Ÿæ–½å†…å®¹
- Vite + React + TypeScriptåˆæœŸåŒ–
- TailwindCSSè¨­å®š
- React Routerè¨­å®š
- ESLint + Prettierè¨­å®š
- ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ä½œæˆ

#### æˆæœç‰©
- `frontend/src/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
- `frontend/src/services/api.ts` (Axiosè¨­å®š)
- `frontend/src/types/index.ts` (å‹å®šç¾©)

### 8. TASK-101: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒä½œæˆ (å®Œäº†)

#### å®Ÿæ–½å†…å®¹
1. Deviseã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆ`rails g devise:install`ï¼‰
2. Userãƒ¢ãƒ‡ãƒ«ç”Ÿæˆï¼ˆ`rails g devise User`ï¼‰
3. Userãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç·¨é›†ï¼ˆusername, roleè¿½åŠ ï¼‰
4. Trainingsãƒ†ãƒ¼ãƒ–ãƒ«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
5. TrainingRecordsãƒ†ãƒ¼ãƒ–ãƒ«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
6. UserStatsãƒ†ãƒ¼ãƒ–ãƒ«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
7. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆãƒ»ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

#### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹
```
$ bundle exec rails db:migrate:status
database: app_development

 Status   Migration ID    Migration Name
--------------------------------------------------
   up     20251117234045  Devise create users
   up     20251117234513  Create trainings
   up     20251117234555  Create training records
   up     20251117234640  Create user stats
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å: `app_development`, `app_test`
- ãƒ›ã‚¹ãƒˆ: localhostï¼ˆDevContainerå†…ï¼‰
- ãƒãƒ¼ãƒˆ: 5432
- ãƒ¦ãƒ¼ã‚¶ãƒ¼: postgres
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: password

#### æˆæœç‰©
- `backend/db/migrate/20251117234045_devise_create_users.rb`
- `backend/db/migrate/20251117234513_create_trainings.rb`
- `backend/db/migrate/20251117234555_create_training_records.rb`
- `backend/db/migrate/20251117234640_create_user_stats.rb`
- `backend/config/database.yml` (æ›´æ–°)

### 9. TASK-102: JWTèªè¨¼ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨å®Ÿè£… (å®Œäº†)

#### å®Ÿæ–½å†…å®¹
- Deviseè¨­å®šï¼ˆSessions, Registrations, Application Controllerï¼‰
- JWTèªè¨¼å®Ÿè£…ï¼ˆcookie-basedï¼‰
- CORSè¨­å®šï¼ˆcredentialså¯¾å¿œï¼‰
- èªè¨¼ãƒã‚§ãƒƒã‚¯ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢å®Ÿè£…

#### æˆæœç‰©
- `backend/app/controllers/api/v1/auth/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- `backend/app/controllers/api/v1/base_controller.rb`
- èªè¨¼APIå®Œå…¨å‹•ä½œç¢ºèª

### 10. TASK-301: Trainingãƒ¢ãƒ‡ãƒ«è©³ç´°å®Ÿè£… (å®Œäº†)

#### å®Ÿæ–½å†…å®¹
- Trainingãƒ¢ãƒ‡ãƒ«ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€Enumã€Scopeè¿½åŠ 
- é›£æ˜“åº¦åˆ¥ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
- è«–ç†å‰Šé™¤ï¼ˆsoft deleteï¼‰å®Ÿè£…

### 11. TASK-202: ç®¡ç†è€…ç”¨Training APIå®Ÿè£… (å®Œäº†)

#### å®Ÿæ–½å†…å®¹
- ç®¡ç†è€…ç”¨Trainingã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©APIå®Ÿè£…
- CRUDæ“ä½œå®Œå…¨å¯¾å¿œ
- èªè¨¼ãƒ»èªå¯ãƒã‚§ãƒƒã‚¯å®Ÿè£…
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…

### 12. TASK-203: ç®¡ç†ç”»é¢UIå®Ÿè£… (å®Œäº†)

#### å®Ÿæ–½å†…å®¹
- ç®¡ç†ç”»é¢UIå®Œå…¨å®Ÿè£…
- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ä¸€è¦§ãƒ»ä½œæˆãƒ»ç·¨é›†æ©Ÿèƒ½
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
- ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### 13. TASK-302: TrainingRecordãƒ¢ãƒ‡ãƒ«ãƒ»APIå®Ÿè£… (å®Œäº†)

#### å®Ÿæ–½å†…å®¹
- TrainingRecordãƒ¢ãƒ‡ãƒ«è©³ç´°å®Ÿè£…
- è¨˜éŒ²CRUD APIå®Ÿè£…
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ
- çµ±è¨ˆè‡ªå‹•æ›´æ–°æ©Ÿèƒ½

### 14. TASK-303: ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¨˜éŒ²UIå®Ÿè£… (å®Œäº†)

#### å®Ÿæ–½å†…å®¹
- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¨˜éŒ²UIå®Œå…¨å®Ÿè£…
- è¨˜éŒ²ä½œæˆãƒ»ä¸€è¦§è¡¨ç¤ºæ©Ÿèƒ½
- çµ±è¨ˆã‚µãƒãƒªãƒ¼è¡¨ç¤º
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

### ğŸ†• 15. TASK-304: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»çµ±è¨ˆè¡¨ç¤ºæ©Ÿèƒ½å®Ÿè£… (å®Œäº†)

#### å®Ÿæ–½å†…å®¹
- Chart.jsçµ±åˆï¼ˆreact-chartjs-2ï¼‰
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸å®Œå…¨å®Ÿè£…
- çµ±è¨ˆæ¦‚è¦ã‚«ãƒ¼ãƒ‰ï¼ˆä»Šé€±/ä»Šæœˆè¨˜éŒ²æ•°ã€åˆè¨ˆãƒã‚¤ãƒ³ãƒˆã€é€£ç¶šæ—¥æ•°ï¼‰
- ãƒˆãƒ¬ãƒ³ãƒ‰ã‚°ãƒ©ãƒ•ï¼ˆé€±é–“/æœˆé–“æ¨ç§»ã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°åˆ¥é »åº¦ï¼‰
- é”æˆåº¦ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ 
- ãŠæ°—ã«å…¥ã‚Šãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¡¨ç¤º

#### æ–°è¦APIå®Ÿè£…
```bash
GET /api/v1/users/dashboard_stats  # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµ±è¨ˆ
GET /api/v1/users/training_trends  # ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒˆãƒ¬ãƒ³ãƒ‰
```

#### æ–°è¦å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«
```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
backend/app/models/user.rb                    # çµ±è¨ˆè¨ˆç®—ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
backend/app/controllers/api/v1/users_controller.rb  # çµ±è¨ˆAPIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
frontend/src/pages/Dashboard.tsx              # ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
frontend/src/components/dashboard/            # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰é–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
frontend/src/hooks/useDashboardStats.ts       # çµ±è¨ˆAPIãƒ•ãƒƒã‚¯
frontend/src/hooks/useTrainingTrends.ts       # ãƒˆãƒ¬ãƒ³ãƒ‰APIãƒ•ãƒƒã‚¯
```

#### æŠ€è¡“ç‰¹å¾´
- Chart.js + react-chartjs-2ã«ã‚ˆã‚‹ç¾ã—ã„ã‚°ãƒ©ãƒ•è¡¨ç¤º
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œï¼ˆãƒ¢ãƒã‚¤ãƒ«ã€œãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼‰
- TypeScriptå‹å®šç¾©å®Œå‚™
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…
- é”æˆåº¦ãƒãƒƒã‚¸ã«ã‚ˆã‚‹ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³å‘ä¸Š

#### å®Ÿè£…åŠ¹ç‡
- **äºˆæƒ³æ™‚é–“**: 2-3æ™‚é–“
- **å®Ÿéš›æ™‚é–“**: 1.5æ™‚é–“
- **åŠ¹ç‡æ€§**: 25%æ™‚é–“çŸ­ç¸®é”æˆ

---

## æ›´æ–°å¾Œã®é€²æ—çŠ¶æ³ï¼ˆ2025-11-26æ™‚ç‚¹ï¼‰

### âœ… å®Œäº†ãƒ•ã‚§ãƒ¼ã‚º
- âœ… Tsumikiã‚³ãƒãƒ³ãƒ‰å°å…¥å®Œäº†
- âœ… è¦ä»¶å®šç¾©å®Œäº†ï¼ˆ13è¦ä»¶ï¼‰
- âœ… è¨­è¨ˆå®Œäº†ï¼ˆ4ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰
- âœ… ã‚¿ã‚¹ã‚¯åˆ†å‰²å®Œäº†ï¼ˆ25ã‚¿ã‚¹ã‚¯ï¼‰

### âœ… å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º - **44%å®Œäº†**
#### åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ5ã‚¿ã‚¹ã‚¯ï¼‰
- âœ… TASK-001: é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- âœ… TASK-002: Rails APIåˆæœŸåŒ–
- âœ… TASK-003: React + ViteåˆæœŸåŒ–
- âœ… TASK-101: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒä½œæˆ
- âœ… TASK-102: JWTèªè¨¼ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨å®Ÿè£…

#### æ©Ÿèƒ½å®Ÿè£…ï¼ˆ6ã‚¿ã‚¹ã‚¯ï¼‰
- âœ… TASK-301: Trainingãƒ¢ãƒ‡ãƒ«è©³ç´°å®Ÿè£…
- âœ… TASK-202: ç®¡ç†è€…ç”¨Training APIå®Ÿè£…
- âœ… TASK-203: ç®¡ç†ç”»é¢UIå®Ÿè£…
- âœ… TASK-302: TrainingRecordãƒ¢ãƒ‡ãƒ«ãƒ»APIå®Ÿè£…
- âœ… TASK-303: ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¨˜éŒ²UIå®Ÿè£…
- âœ… TASK-304: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»çµ±è¨ˆè¡¨ç¤ºæ©Ÿèƒ½å®Ÿè£… ğŸ†•

### ğŸ”„ æ¬¡ã‚¿ã‚¹ã‚¯å€™è£œ
- **TASK-305**: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤ºæ©Ÿèƒ½ï¼ˆæ¨å¥¨ï¼‰
- **TASK-306**: ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ©Ÿèƒ½å®Ÿè£…
- **TASK-601**: é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ åŸºç›¤

### ğŸ“Š ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³
- **å®Œäº†æ¸ˆã¿**: 11/25ã‚¿ã‚¹ã‚¯ï¼ˆ44%å®Œäº†ï¼‰
- **ç´¯ç©å®Ÿè£…æ™‚é–“**: ç´„13.5æ™‚é–“
- **æ¨å®šæ®‹ã‚Šæ™‚é–“**: ç´„42.5æ™‚é–“
- **é–‹ç™ºåŠ¹ç‡**: æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ æ´»ç”¨ã«ã‚ˆã‚Šç¶™ç¶šçš„é«˜åŠ¹ç‡å®Ÿè£…

### ğŸš€ åˆ©ç”¨å¯èƒ½ãªæ©Ÿèƒ½
```
# ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘æ©Ÿèƒ½
http://localhost:3000/dashboard               # ğŸ†• ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆçµ±è¨ˆãƒ»ã‚°ãƒ©ãƒ•ï¼‰
http://localhost:3000/training-records        # ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¨˜éŒ²
http://localhost:3000/auth-test               # èªè¨¼ãƒ†ã‚¹ãƒˆ

# ç®¡ç†è€…å‘ã‘æ©Ÿèƒ½
http://localhost:3000/admin/training-management  # ç®¡ç†ç”»é¢
```

