---
description: 要件定義書をもとに詳細設計書を作成します（アーキテクチャ、データ設計、API設計を含む）
argument-hint:
allowed-tools: Write, Read
---

要件定義書（`docs/spec/requirements.md`）を基に、システムの詳細設計書を作成します。

## 実行内容

### 前提条件の確認

1. **要件定義書の存在確認**
   - `docs/spec/requirements.md` が存在するか確認
   - 技術スタック（`docs/tech-stack.md`）の確認
   - 既存設計文書の調査

### Phase 1: アーキテクチャ設計

**質問1: アーキテクチャパターン**
プロジェクトの規模と要件に基づき、最適なパターンを選択してください：

1. **レイヤードアーキテクチャ** - 階層化された構造、保守性重視
2. **クリーンアーキテクチャ** - 依存性の制御、テスト容易性
3. **マイクロサービス** - 独立性、スケーラビリティ
4. **モノリシック** - シンプル、小〜中規模向け
5. **イベント駆動** - 非同期処理、疎結合
6. **その他** - 特殊要件に基づく独自パターン

### Phase 2: データ設計

**質問2: データ永続化方式**
1. **リレーショナルDB** - 正規化、ACID特性
2. **NoSQL** - 柔軟性、スケーラビリティ
3. **ハイブリッド** - 用途に応じた使い分け
4. **ファイルベース** - 軽量、シンプル

### Phase 3: インターフェース設計

**質問3: API設計方針**（バックエンドがある場合）
1. **RESTful API** - 標準的、HTTP準拠
2. **GraphQL** - 柔軟なクエリ、効率的
3. **gRPC** - 高性能、型安全
4. **WebSocket** - リアルタイム通信

**質問4: UI設計アプローチ**（フロントエンドがある場合）
1. **レスポンシブデザイン** - マルチデバイス対応
2. **モバイルファースト** - スマートフォン優先
3. **デスクトップ最適化** - PC利用中心
4. **PWA** - アプリライク体験

### Phase 4: セキュリティ設計

**質問5: 認証方式**
1. **JWT** - ステートレス、分散対応
2. **セッション** - サーバーサイド管理
3. **OAuth 2.0** - 外部認証連携
4. **多要素認証** - セキュリティ強化

## 最終成果物

以下の設計書を生成します：

- `docs/design/architecture.md` - アーキテクチャ設計書
- `docs/design/data.md` - データ設計書
- `docs/design/api.md` - API設計書
- `docs/design/ui.md` - UI設計書

設計作業を開始しますか？まず要件定義書の確認から始めさせていただきます。