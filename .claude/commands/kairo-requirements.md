---
description: EARS記法を使用して詳細な受け入れ基準を含む要件定義書を作成します
argument-hint:
allowed-tools: Write, Read, Glob, Grep
---

既存プロジェクトの情報を収集・分析し、ユーザから要件をヒアリングして、EARS（Easy Approach to Requirements Syntax）記法を使用した詳細な受け入れ基準を含む要件定義書を作成します。

## 実行内容

### Phase 0: 既存プロジェクト情報の収集

まず、既存のプロジェクト情報を分析します：

1. **プロジェクト設定の確認**
   - CLAUDE.md の内容確認
   - README.md の確認
   - 既存ドキュメントの調査

2. **コードベースの分析**
   - ディレクトリ構造の確認
   - 主要ファイルの機能分析
   - 既存機能の把握

### Phase 1: 要件ヒアリング

以下の形式で要件をお聞きします：

**質問1: システムの主な目的は何ですか？**
1. データ管理システム
2. Webアプリケーション
3. API サービス
4. その他（自由記述）

**質問2: 主要なユーザー種別を教えてください**
1. 一般ユーザー
2. 管理者
3. 外部システム
4. その他（自由記述）

**質問3: 必要な機能をお聞かせください**
（機能ごとに詳細をヒアリング）

### Phase 2: EARS記法による要件定義

各要件をEARS記法で記述します：

- **Shall（必須要件）**: システムは[条件]において[動作]しなければならない
- **Should（推奨要件）**: システムは[条件]において[動作]すべきである
- **When（状況依存）**: [条件]の場合、システムは[動作]しなければならない

### 最終成果物

`docs/spec/requirements.md` を以下の構造で生成：

```markdown
# 要件定義書

## プロジェクト概要
## ステークホルダー
## 機能要件
### REQ-001: [機能名]
**EARS記法**: [EARS形式の要件]
**受け入れ基準**: [BDD形式の基準]
**優先度**: [High/Medium/Low]

## 非機能要件
## 制約事項
## 前提条件
## 用語集
```

要件定義を開始しますか？まず既存プロジェクトの分析から始めさせていただきます。